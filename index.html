<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- VUEJS -->
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <!-- FONTAWESOME -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css" integrity="sha512-z3gLpd7yknf1YoNbCzqRKc4qyor8gaKU1qmn+CShxbuBusANI9QpRohGBreCFkKxLhei6S9CQXFEbbKuqLg0DA==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <!-- CSS -->
    <link rel="stylesheet" href="css/style.css">
    <!-- LUXON -->
    <script src="https://cdn.jsdelivr.net/npm/luxon@3.4.3/build/global/luxon.min.js"></script>
    <title>WhatsApp</title>
</head>
<body>
    <div class="container" id="app">
        <header>
            <!-- ACCOUNT -->
            <div class="my-account">
    
                <div class="profile">
                    <div class="image">
                        <img src="img/avatar_io.jpg" alt="">
                    </div>
                    <p>Sofia</p>
                </div>

                <div class="icons">
                    <i class="fa-solid fa-circle-notch"></i>
                    <i class="fa-solid fa-message"></i>
                    <i class="fa-solid fa-ellipsis-vertical"></i>
                </div>
            </div>

            <div class="contact-account">
                <div class="profile">
                    <div class="image">
                        <img :src="contacts[counterChat].avatar" alt="">
                    </div>
                    <div class="name">
                        <p>{{ contacts[counterChat].name }}</p>
                        <span>Ultimo messaggio: {{ contacts[counterChat].messages[contacts[counterChat].messages.length-1].date }}</span>
                    </div>
                </div>

                <div class="icons">
                    <i class="fa-solid fa-magnifying-glass"></i>
                    <i class="fa-solid fa-paperclip"></i>
                    <i class="fa-solid fa-ellipsis-vertical"></i>
                </div>

            </div>

        </header>
        
        <aside>
    
                <!-- NOTIFICATION -->
                <div class="notification">
    
                    <div class="bell">
                        <i class="fa-solid fa-bell-slash"></i>
                    </div>
    
                    <div class="text">
                        <p>Ricevi notifiche di nuovi messaggi</p>
                        <a href="#">Attiva notifiche dekstop</a>
                    </div>
    
                </div>
    
                <!-- SEARCH CONTACTS -->
                <div class="search">
                    <button><i class="fa-solid fa-magnifying-glass"></i></button>
                    <input 
                    @keyup="filterContact()"
                    v-model.trim="filter"
                    type="text" 
                    placeholder="Cerca o inizia una nuova chat">
                </div>

            <!-- CONTACTS LIST -->
            <div class="contacts-list">
                <ul>
                    
                    <li 
                    v-show="contact.visible === true"
                    @click="counterChat = index"
                    :class="{'active': counterChat === index}"
                    v-for="(contact, index) in contacts">
                        <div class="profile">
                            <div class="image">
                                <img :src="contact.avatar" alt="">
                            </div>
                            <div class="name">
                                <p>{{ contact.name }}</p>
                                <span>{{ contact.messages[contact.messages.length-1].message }}</span>
                            </div>
                        </div>

                        <div class="time">
                            <span>{{ contact.messages[contact.messages.length-1].date }}</span>
                        </div>
                    </li>
                </ul>
            </div>


        </aside>

        <main>

            <div class="chat">
                
                <div 
                v-for="message in contacts[counterChat].messages"
                :class="message.status"
                class="message">
                    <p>{{ message.message }}</p>
                    <span>{{ message.date }}</span>
                </div>

            </div>
            
            <div class="sent-message">
                <div class="emojis">
                    <i class="fa-regular fa-face-smile"></i>
                </div>
                <div class="writing-message">
                    <input 
                    @keyup.enter="sentMessage()"
                    v-model="newMessage"
                    type="text" 
                    placeholder="Scrivi un messaggio">
                </div>
                <div class="vocal">
                    <i class="fa-solid fa-microphone"></i>
                </div>
            </div>

        </main>
        
    </div>
    <!-- JAVASCRIPT -->
    <script src="js/script.js"></script>
</body>
</html>